I"š<h2 id="linux-controls-the-computers-audio-with-a-system-that-identifies-the-architecture-and-plays-the-audio-behind-the-devices-drive">Linux controls the computerâ€™s audio with a system that identifies the architecture and plays the audio behind the deviceâ€™s drive.</h2>

<p>The current component that the Linux kernel uses to perform this function is <strong>ALSA which stands for Advanced Linux Sound Architecture</strong>.</p>

<p>Normally, <a href="https://wiki.gentoo.org/wiki/ALSA">ALSA</a> supports up to eight boards numbered 0 through 7. Each board is a physical or logical core device with input, output or sound control capability and can also be addressed by its id which is an explanatory string such as Headset or ICH9 .</p>

<p>If the board is omitted, this means board 0 or default board, where most of the sounds are played and that is determined by the operating system. Plates have numbered devices starting with 0.</p>

<p>When you install Gentoo, these devices generally do not automatically recognize for various reasons</p>

<ul>
  <li>1â€Šâ€”â€ŠYou did not properly enable the device drive in the kernel. So first make sure the device is enabled in the Linux Kernel</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">lspci | <span class="nb">grep</span> <span class="nt">-i</span> audio
<span class="nb">cd</span> /usr/src/linux <span class="o">&amp;&amp;</span> make menuconfig</code></pre></figure>

<p>Activate the following kernel options:</p>

<p><img src="/assets/img/media/kernel-alsa.gif" alt="/assets/img/media/kernel-alsa.gif" title="/assets/img/media/kernel-alsa.gif" /></p>

<p>The <code class="highlighter-rouge">lsmod</code> command can be helpful.</p>

<p>If the system has more than 8 sound outputs (Each HDMI output on a GPU will count as one), the max number of sound cards will need to be increased:</p>

<p><img src="/assets/img/media/kernel-alsa-2.gif" alt="/assets/img/media/kernel-alsa-2.gif" title="/assets/img/media/kernel-alsa-2.gif" /></p>

<ul>
  <li>2â€Šâ€”â€ŠNext you need to check if the devices are being listed</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cat</span> /proc/asound/cards</code></pre></figure>

<ul>
  <li>3â€” Compile alsautils so you can see the devices and configure them</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">emerge <span class="nt">--ask</span> media-sound/alsa-utils</code></pre></figure>

<ul>
  <li>4â€Šâ€”â€ŠWith the normal user (not the root) run the command below and read the tips that appear (for example, F6 to list the sound cards)</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># normal user, dont'n run root</span>
alsamixer</code></pre></figure>

<p><img src="/assets/img/media/alsamixer.gif" alt="/assets/img/media/alsamixer.gif" title="/assets/img/media/alsamixer.gif" /></p>

<ul>
  <li>5â€Šâ€”â€ŠIf nothing happens and the problem persists, force the card to read by editing the file alsa.conf</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim /etc/modprobe.d/alsa.conf</code></pre></figure>

<p>And insert the content below at the end of the file</p>

<figure class="highlight"><pre><code class="language-md" data-lang="md">options snd-ca0106 index=0
alias snd-card-1 snd-hda-intel
options snd-hda-intel index=1
options snd cards_limit=2</code></pre></figure>

<h2 id="restart-the-system-and-enjoy-the-sound">Restart the system and enjoy the sound!</h2>

<p>via: <a href="https://medium.com/marcos-oliveira/how-to-troubleshoot-audio-sound-in-gentoo-3efd5bd8d628">Marcos Oliveira Medium</a></p>
:ET