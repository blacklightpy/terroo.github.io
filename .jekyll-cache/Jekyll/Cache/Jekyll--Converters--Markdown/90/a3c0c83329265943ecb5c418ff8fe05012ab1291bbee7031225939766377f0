I"µ/<p><img src="/assets/img/games/mednafen.jpg" alt="Play Retro Games on Linux with Mednafen" /></p>

<p>I, like all other mortals, am also a fan of games, only I didn‚Äôt adapt much to the new games and the new platforms.</p>

<p>Sometimes I still gamble on Wii and modern PC games with my son, but I have fun even with retro games.</p>

<p>In the past I used the emulators: <strong>Gens</strong> for the Mega-Drive, <strong>ZNES</strong> for the Super Nintendo and <strong>Stella</strong> for the Atari. But some of these emulators were discontinued and I thought it was bad to have 3 installed for each console.</p>

<p>I even tried <a href="https://www.retroarch.com/">Retroarch</a> and others. But I found some bizarre bugs, at least for the system I use: Gentoo.</p>

<p>Then, browsing the emulator options in the <a href="https://wiki.gentoo.org/wiki/Games/emulation">Gentoo documentation</a>, I came across <a href="https://mednafen.github.io/">Mednafen</a>. To test it first I tried it on Ubuntu that I have on another partition and it worked.</p>

<p>But I had to adjust the Mednafen configuration file by hand because the graphical version still has some limits.</p>

<p>And I decided to share with you here how to install on Ubuntu and Gentoo, as well as settings I didn‚Äôt find on the internet and I had to turn around to find out.</p>

<hr />

<h1 id="introduction">Introduction</h1>

<p><a href="https://mednafen.github.io/">Mednafen</a> is a command line emulator for many different systems. It has full support for OpenGL and SDL graphics, network play, remapable input configuration, support for joystick and keyboard, save states, game rewind, GSF playback and screenshots. The systems supported by Mednafen are:</p>
<ul>
  <li>Atari Lynx</li>
  <li>Neo Geo Pocket</li>
  <li>Neo Geo Pocket Color</li>
  <li>WonderSwan</li>
  <li>Game Boy</li>
  <li>Game Boy Color</li>
  <li>Game Boy Advance</li>
  <li>Nintendo Entertainment System/Famicom</li>
  <li>Super Nintendo Entertainment System/Super Famicom</li>
  <li>Virtual Boy</li>
  <li>PC Engine/TurboGrafx 16 (CD)</li>
  <li>SuperGrafx</li>
  <li>PC-FX</li>
  <li>Sega Game Gear</li>
  <li>Sega Genesis/Megadrive</li>
  <li>Sega Master System</li>
  <li>Sega Saturn</li>
  <li>Sony PlayStation</li>
</ul>

<hr />

<h1 id="installation-on-ubuntu">Installation on Ubuntu</h1>
<p>As I told you, I also tested on Ubuntu and followed these steps:
I installed the emulator and the graphical interface to choose the console, settings, games, ‚Ä¶</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt <span class="nb">install </span>mednafen mednaffe</code></pre></figure>

<p>And then I opened it through Dash by typing: <strong>mednaffe</strong>. And it worked great, but I realized that Mega-Drive, which is what I like the most üòû, it was only possible to play with 3 buttons and I left it up to Gentoo to solve this, I feel more comfortable solving these types of research-related problems!</p>

<hr />

<h1 id="gentoo-installation">Gentoo Installation</h1>
<p>Well, installing Gentoo was also simple, but there were some differences. First I compiled the packages:</p>
<ul>
  <li><code class="highlighter-rouge">games-emulation/mednafen</code> - Emulator.</li>
  <li><code class="highlighter-rouge">games-emulation/mednaffe</code> - Interface for configuring the emulator.
In Gentoo there is still <code class="highlighter-rouge">games-server/mednafen-server</code> which is a server for Mednafen.</li>
</ul>

<p>After compiling and installing I came across the first problem. The current version (according to the date I tested) is <em>0.9.46</em> and Mednaffe does not open for that version.</p>

<p>So I went to search <a href="https://packages.gentoo.org/packages/games-emulation/mednafen">on this link</a> if there was a new ebuild, the maintainer said that it has not yet been implemented, but that it is possible to update directly:</p>

<p><img src="/assets/img/games/update-mednafen-gentoo.png" alt="Version 1.24.3 is available upstream. Please consider updating!" /></p>

<p>So I downloaded the new version and compiled it, but first rename the previous version so that Mednaffe could take the new path:</p>
<blockquote>
  <p>Remembering that it is <strong>64-bit</strong>, for Linux there is only this option.</p>
</blockquote>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">su <span class="nt">-c</span> <span class="s2">"mv/usr/bin/mednafen/usr/bin/mednafen_old"</span>
wget https://mednafen.github.io/releases/files/mednafen-1.21.3.tar.xz
<span class="nb">tar </span>Jxvf mednafen-1.21.3.tar.xz
<span class="nb">cd </span>mednafen
./configure
make
su <span class="nt">-c</span> <span class="s2">"make install"</span></code></pre></figure>

<p>There, the version is now <strong>1.21.3</strong>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">mednafen <span class="nt">--version</span>
Starting Mednafen 1.21.3
 Build information:
   Compiled with gcc 9.3.0
   Compiled against zlib 1.2.11, running with zlib 1.2.11 <span class="o">(</span>flags <span class="o">=</span> 0x000000a9<span class="o">)</span>
   Compiled against SDL 2.0.12 <span class="o">(</span>hg-13609: 34cc7d3b69d3<span class="o">)</span>, running with SDL 2.0.12 <span class="o">(</span>hg-13609: 34cc7d3b69d3<span class="o">)</span>
   Running with libsndfile-1.0.29
 Base directory: <span class="nv">$ </span><span class="o">{</span>HOME<span class="o">}</span> /. Mednafen
 Emulation modules: nes snes gb gba pce lynx md pcfx ngp psx ss ssfplay vb wswan sms gg snes_faust pce_fast demo cdplay
 Opening lockfile ...
 Loading settings from <span class="s2">"</span><span class="nv">$ </span><span class="s2">{HOME} /. Mednafen/mednafen.cfg"</span> ...
  Loaded 7396 valid settings and 129 unknown settings.
Unrecognized argument: <span class="nt">--version</span></code></pre></figure>

<p>So I was able to open Mednaffe:</p>

<p><img src="/assets/img/games/mednaffe-running.png" alt="Mednaffe running" /></p>

<p>I added a ROM in <strong>File &gt; Open ROM</strong>, remembering that you don‚Äôt need to unzip the ROM you downloaded. A cool site to download games/ROMs is <a href="https://coolrom.com.au/">Cool ROM</a>, if you want to search for games from a specific console go to <strong>ROM files</strong>, <a href="https://coolrom.com.au/roms/genesis/">here</a> an example of a link to search and find games for Mega-Drive.</p>

<p>Well, so far so good, but then a ‚Äúsmall problem‚Äù appeared, the Mega-Drive only there are 3 buttons, but I managed to solve this problem and I will show you how I solved it in the topic below.</p>

<h1 id="configuring-the-mega-drive-for-6-buttons">Configuring the Mega-Drive for 6 Buttons</h1>
<p>Well, you can configure: Fullscren, keyboard, ‚Ä¶ according to the console you want to customize through Mednaffe by going to the <strong>Systems</strong> tab, selecting the console and the <strong>Input</strong> tab clicking on <strong>Controller Setup</strong> and set the keys you want to be: Up, ‚Üí, ‚Üì, ‚Üê, button: A, B, C and start.</p>

<p>But there is a limitation in the graphic part (Mednaffe) that it is not possible to configure the buttons: X, Y and Z, just like the developer <a href="https://forum.fobby.net/index.php?t=msg&amp;&amp;th=1637&amp;goto=5354#msg_5354">said here</a>.</p>

<p>The Mednafen configuration directory is at: <code class="highlighter-rouge">~/.mednafen</code> and the main file is <code class="highlighter-rouge">~/.mednafen/mednafen.cfg</code> and it is generated as soon as you open a game to run. You can obtain all documentation <a href="https://mednafen.github.io/documentation/">at this link</a>.</p>

<p>According to a comment from another member of the forum, you just need to edit the configuration file and set it to <code class="highlighter-rouge">gamepad6</code>, but it was not very clear, so I will summarize:</p>
<ul>
  <li><strong>1¬∫</strong> - In the configuration file <code class="highlighter-rouge">~/.mednafen/mednafen.cfg</code> the lines referring to Mega-Drive start: <strong>md</strong> after followed by <code class="highlighter-rouge">input</code> then the port, in this case the control number, for player 1 would be:<code class="highlighter-rouge"> port1 gamepad</code> and then follow the subsequent lines with the same pattern as with new parameters that define the keys.</li>
</ul>

<p>But the line that does not have new parameters is precisely the one that defines which keyboard model you want and by default it is only <code class="highlighter-rouge">gamepad</code>. if you want the Mega Drive to accept 6 buttons it is to replace <code class="highlighter-rouge">gamepad</code> with<code class="highlighter-rouge"> gamepad6</code>, if you want to run this command through the terminal that will do this automatically:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/^md.input.port1 gamepad$/md.input.port1 gamepad6/'</span> ~/.mednafen/mednafen.cfg</code></pre></figure>

<p>But the keys have a peculiar numbering different from the outputs of the <code class="highlighter-rouge">showkey</code> for example. Then, you will have to find out by changing the graphics and figuring out the numbers.</p>

<p>For example, in my case I defined the keys on the keyboard: <code class="highlighter-rouge">a</code>,<code class="highlighter-rouge"> s</code> and <code class="highlighter-rouge">d</code> to be the <strong>A</strong>, <strong>B</strong> and <strong>C</strong> buttons on the Mega Drive. And the keyboard keys: <code class="highlighter-rouge">x</code>,<code class="highlighter-rouge"> c</code> and <code class="highlighter-rouge">v</code> to be the <strong>X</strong>, <strong>Y</strong> and <strong>Z</strong> of the Mega Drive. And the arrow keys to be: up, down, ‚Ä¶</p>

<p>If you want to save time, use my configuration file, just run this command:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">wget https://terminalroot.com.br/downs/mednafen.cfg <span class="nt">-O</span> ~/.mednafen/mednafen.cfg</code></pre></figure>

<p>And ready, open and try to play a game and use the keys I informed you!</p>

<p>In the future I will record some * gameplays * and post on <a href="https://www.twitch.tv/TerminalRootTV">my Twitch channel</a>, stay there if you want to follow.</p>

<p>Ah! I almost forgot, <strong>Alt + Enter</strong> changes to full screen! üòÉ I hope I helped!</p>

<p><img src="/assets/img/games/mednafen-mega-drive-play.png" alt="Play Mednafen Gentoo bspwm" /></p>

<h1 id="thanks">Thanks!</h1>

<!-- QUADRADO -->
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<p><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-2838251107855362" data-ad-slot="5351066970"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<!-- LISTA MIN -->
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<p><ins class="adsbygoogle" style="display:inline-block;width:730px;height:95px" data-ad-client="ca-pub-2838251107855362" data-ad-slot="5351066970"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<!-- RETANGULO LARGO 2 -->
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<p><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-2838251107855362" data-ad-slot="8549252987"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<!-- RETANGULO LARGO -->
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- Informat -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2838251107855362" data-ad-slot="2327980059" data-ad-format="auto" data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

:ET